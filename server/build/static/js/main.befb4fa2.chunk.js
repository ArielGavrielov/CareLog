(this.webpackJsonpdoctor=this.webpackJsonpdoctor||[]).push([[0],{121:function(e,t,n){},122:function(e,t,n){},202:function(e,t,n){},206:function(e,t,n){},207:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(16),c=n.n(o),s=n(25),i=n.n(s),l=n(39),u=n(7),d=n(18),j=n(2),b=function(e,t,n){var o=r.a.createContext();return{Context:o,Provider:function(r){var c=r.children,s=Object(a.useReducer)(e,n),i=Object(d.a)(s,2),l=i[0],b=i[1],h={};for(var p in t)h[p]=t[p](b);return Object(j.jsx)(o.Provider,{value:Object(u.a)({state:l},h),children:c})}}},h=n(85),p=n.n(h).a.create({baseURL:"http://localhost:3001/api/",timeout:1e4});p.interceptors.request.use((function(e){var t=localStorage.getItem("token");return e.headers.Authorization=t,e})),p.interceptors.response.use((function(e){return e}),(function(e){var t=localStorage.getItem("token");return 401===e.response.status&&t?(localStorage.removeItem("token"),Promise.reject("Token expired.").finally((function(){window.location.reload(),alert("Token expired.")}))):Promise.reject(e)}));var O=b((function(e,t){switch(t.type){case"restore_token":return Object(u.a)(Object(u.a)({},e),{},{token:t.payload,isLoading:!1});case"add_error":return Object(u.a)(Object(u.a)({},e),{},{errorMessage:t.payload,message:""});case"signin":return Object(u.a)(Object(u.a)({},e),{},{errorMessage:"",token:t.payload});case"signout":return Object(u.a)(Object(u.a)({},e),{},{errorMessage:"",token:null,isLoading:!1});case"clear_error_message":return Object(u.a)(Object(u.a)({},e),{},{errorMessage:""});default:return{isLoading:!1,token:null,errorMessage:""}}}),{signin:function(e){return function(t){var n=t.email,a=t.password;return new Promise(function(){var t=Object(l.a)(i.a.mark((function t(r,o){var c;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,console.log("signin"),t.next=4,p.post("/doctor/signin",{email:n,password:a});case 4:c=t.sent,console.log(c.data),localStorage.setItem("token",c.data.token),e({type:"signin",payload:c.data.token}),r(!0),t.next=17;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0),console.log(t.t0.response.data.error),e({type:"add_error",payload:t.t0.response.data.error}),o(!1);case 17:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,n){return t.apply(this,arguments)}}()).then((function(e){console.log(e),e&&window.location.reload()}))}},signout:function(e){return Object(l.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:localStorage.removeItem("token"),e({type:"signout"}),window.location.reload();case 3:case"end":return t.stop()}}),t)})))},clearErrorMessage:function(e){return function(){e({type:"clear_error_message"})}},restoreToken:function(e){return Object(l.a)(i.a.mark((function t(){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{n=localStorage.getItem("token"),e({type:"restore_token",payload:n})}catch(a){console.log("cant to get token..."),e({type:"restore_token",payload:null})}case 1:case"end":return t.stop()}}),t)})))}},{token:null,errorMessage:"",isLoading:!0}),g=O.Provider,f=O.Context,x=n(26),m=(n(121),n(122),n(210)),v=n(209),k=n(211),w=n(10),y=n.p+"static/media/logo-1500X500.fcf81f3f.png",L=function(){return Object(j.jsx)("div",{children:Object(j.jsx)("h2",{children:"Home"})})},S=n(86),C=n.n(S),P=n(53),I=n.n(P),z=n(87),_=n.n(z),E=n(88),F=n.n(E),M=n(54),A=n.n(M),D=n(90),R=n(24),T=n(89),B=n.n(T);n(201),n(202);A.a.setAppElement("div");var Z={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)"}},G=function(){var e=r.a.useState(!1),t=Object(d.a)(e,2),n=t[0],a=t[1],o=r.a.useState({email:"",phone:""}),c=Object(d.a)(o,2),s=c[0],i=c[1],l=r.a.useState({error:null,success:null}),b=Object(d.a)(l,2),h=b[0],O=b[1],g=function(){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(s.email)&&/^\+?(972|0)(\/-)?0?([5]{1}[0-9]{1}\d{7})$/.test(s.phone)};return Object(j.jsxs)("div",{children:[Object(j.jsx)(D.a,{block:!0,size:"lg",type:"submit",onClick:function(){return a(!0)},children:"Add Patient"}),Object(j.jsx)("div",{id:"modal",className:"modal",children:Object(j.jsxs)(A.a,{isOpen:n,onRequestClose:function(){return a(!1)},style:Z,closeTimeoutMS:500,children:[Object(j.jsx)("h1",{children:"Link patient"}),Object(j.jsxs)(R.a,{onSubmit:function(e){e.preventDefault(),g()&&p.post("/doctor/link-patient",s).then((function(e){return O({success:e.data.message})})).catch((function(e){return O({error:e.response.data.error})}))},children:[Object(j.jsxs)(R.a.Group,{size:"lg",controlId:"email",children:[Object(j.jsx)(R.a.Label,{children:"Email"}),Object(j.jsx)(R.a.Control,{autoFocus:!0,type:"email",value:s.email,onChange:function(e){return i(Object(u.a)(Object(u.a)({},s),{},{email:e.target.value}))}})]}),Object(j.jsxs)(R.a.Group,{size:"lg",controlId:"password",children:[Object(j.jsx)(R.a.Label,{children:"Phone"}),Object(j.jsx)(B.a,{country:"il",onlyCountries:["il"],placeholder:"Patient phone number",value:s.phone,onChange:function(e){return i(Object(u.a)(Object(u.a)({},s),{},{phone:e}))}})]}),h.success?Object(j.jsx)("div",{children:Object(j.jsx)("b",{style:{color:"green"},children:h.success})}):h.error?Object(j.jsx)("div",{children:Object(j.jsx)("b",{style:{color:"red"},children:h.error})}):null,Object(j.jsx)(D.a,{block:!0,size:"lg",type:"submit",disabled:!g(),children:"Send request to patient"})]})]})})]})},N=P.Search.SearchBar,$=[{dataField:"_id",hidden:!0},{dataField:"firstname",text:"First name",sort:!0},{dataField:"lastname",text:"Last name",sort:!0},{dataField:"email",text:"Email"},{dataField:"phone",text:"Phone"},{dataField:"birthdate",text:"Birth date"},{dataField:"actions",text:"Actions",formatter:function(e,t,n,a){return Object(j.jsx)(x.b,{to:{pathname:"/patient/".concat(t._id),patientData:t},children:"Read More..."})}}],q=function(){var e=r.a.useState([]),t=Object(d.a)(e,2),n=t[0],a=t[1];return r.a.useEffect((function(){p.get("/doctor/patients").then((function(e){a(e.data)})).catch((function(e){console.log(e)}))}),[]),Object(j.jsxs)("div",{children:[Object(j.jsx)(I.a,{keyField:"_id",data:n,columns:$,search:!0,children:function(e){return Object(j.jsxs)("div",{children:[console.log(e.searchProps),Object(j.jsx)("h3",{children:"Input something at below input field:"}),Object(j.jsx)(N,Object(u.a)({},e.searchProps)),Object(j.jsx)("hr",{}),Object(j.jsx)(C.a,Object(u.a)(Object(u.a)({},e.baseProps),{},{striped:!0,hover:!0,condensed:!0,overlay:_()(),pagination:F()()}))]})}}),Object(j.jsx)(G,{})]})},H=function(e){return console.log(e),e.location.patientData?Object(j.jsx)("div",{children:Object(j.jsxs)("p",{children:["patient ",e.location.patientData.firstname]})}):null},J=function(){var e=r.a.useContext(f).signout,t=[{path:"/",component:L,navLink:"Home"},{path:"/patients",component:q,navLink:"Patients"},{path:"/patient/:id",component:H}];return Object(j.jsxs)("div",{children:[Object(j.jsx)(m.a,{bg:"light",sticky:"top",fixed:"top",children:Object(j.jsxs)(v.a,{children:[Object(j.jsx)(m.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(j.jsx)(m.a.Brand,{href:"/",children:Object(j.jsx)("img",{src:y,width:"100",height:"30",className:"d-inline-block align-top",alt:"React Bootstrap logo"})}),Object(j.jsx)(m.a.Collapse,{children:Object(j.jsxs)(k.a,{children:[t.map((function(e,t){if(e.navLink)return Object(j.jsx)(k.a.Link,{href:e.path,children:e.navLink},e+t)})),Object(j.jsx)(k.a.Link,{href:"/signout",children:"Sign out"})]})})]})}),Object(j.jsxs)(w.c,{children:[t.map((function(e,t){return Object(j.jsx)(w.a,{exact:!0,path:e.path,component:e.component},e+t)})),Object(j.jsx)(w.a,{path:"/signout",render:function(){return e(),window.location.href="/",null}})]})]})};n(206);function U(){var e=r.a.useContext(f),t=e.state,n=e.signin,a=r.a.useState({email:"",password:""}),o=Object(d.a)(a,2),c=o[0],s=o[1];return r.a.useState((function(){return function(){return window.location.href="/"}}),[]),Object(j.jsx)("div",{className:"Login",children:Object(j.jsxs)(R.a,{onSubmit:function(e){e.preventDefault(),n(c).then((function(e){console.log(e),e&&(window.location.href="/")})).catch((function(e){return console.log(e)}))},children:[Object(j.jsxs)(R.a.Group,{size:"lg",controlId:"email",children:[Object(j.jsx)(R.a.Label,{children:"Email"}),Object(j.jsx)(R.a.Control,{autoFocus:!0,type:"email",value:c.email,onChange:function(e){return s(Object(u.a)(Object(u.a)({},c),{},{email:e.target.value}))}})]}),Object(j.jsxs)(R.a.Group,{size:"lg",controlId:"password",children:[Object(j.jsx)(R.a.Label,{children:"Password"}),Object(j.jsx)(R.a.Control,{type:"password",value:c.password,onChange:function(e){return s(Object(u.a)(Object(u.a)({},c),{},{password:e.target.value}))}})]}),t.errorMessage?Object(j.jsx)("div",{children:Object(j.jsx)("b",{style:{color:"red"},children:t.errorMessage})}):null,Object(j.jsx)(D.a,{block:!0,size:"lg",type:"submit",disabled:!(/^(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z]).{8,16}$/.test(c.password)&&/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(c.email)),children:"Login"})]})})}var X=function(){return Object(j.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:Object(j.jsxs)("div",{children:[Object(j.jsx)("img",{src:y,style:{width:150,height:50},alt:"CareLog"}),Object(j.jsx)("h3",{children:"Doctor Dashboard simulation"}),Object(j.jsx)(w.c,{children:Object(j.jsx)(w.a,{exact:!0,path:"/*",component:U})})]})})},K=function(){var e=r.a.useContext(f),t=e.state,n=e.restoreToken;e.signout;return r.a.useEffect((function(){t.token||n()}),[]),r.a.useEffect((function(){var e=function(){var e=localStorage.getItem("token");console.log("token",e)};return window.addEventListener("storage",e),function(){window.removeEventListener("storage",e)}}),[]),t.isLoading?null:Object(j.jsx)("div",{className:"App",children:t.token?Object(j.jsx)(J,{}):Object(j.jsx)(X,{})})};c.a.render(Object(j.jsx)(g,{children:Object(j.jsx)(x.a,{children:Object(j.jsx)(K,{})})}),document.getElementById("root"))}},[[207,1,2]]]);
//# sourceMappingURL=main.befb4fa2.chunk.js.map
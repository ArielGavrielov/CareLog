(this.webpackJsonpdoctor=this.webpackJsonpdoctor||[]).push([[0],{210:function(e,t,n){},211:function(e,t,n){},290:function(e,t,n){},399:function(e,t,n){},402:function(e,t,n){},404:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(8),o=n.n(r),s=n(26),i=n.n(s),l=n(48),d=n(7),u=n(14),j=n(3),b=function(e,t,n){var r=c.a.createContext();return{Context:r,Provider:function(c){var o=c.children,s=Object(a.useReducer)(e,n),i=Object(u.a)(s,2),l=i[0],b=i[1],h={};for(var p in t)h[p]=t[p](b);return Object(j.jsx)(r.Provider,{value:Object(d.a)({state:l},h),children:o})}}},h=n(171),p=n.n(h).a.create({baseURL:"https://carelog.herokuapp.com/api/doctor/",timeout:1e4});p.interceptors.request.use((function(e){console.log("production");var t=localStorage.getItem("token");return e.headers.Authorization=t,e})),p.interceptors.response.use((function(e){return e}),(function(e){var t=localStorage.getItem("token");return 401===e.response.status&&t?(localStorage.removeItem("token"),Promise.reject("Token expired.").finally((function(){window.location.reload()}))):(console.log(e),Promise.reject(e))}));var m=b((function(e,t){switch(t.type){case"restore_token":return Object(d.a)(Object(d.a)({},e),{},{token:t.payload,isLoading:!1});case"add_error":return Object(d.a)(Object(d.a)({},e),{},{errorMessage:t.payload,message:""});case"signin":return Object(d.a)(Object(d.a)({},e),{},{errorMessage:"",token:t.payload});case"signout":return Object(d.a)(Object(d.a)({},e),{},{errorMessage:"",token:null,isLoading:!1});case"clear_error_message":return Object(d.a)(Object(d.a)({},e),{},{errorMessage:""});default:return{isLoading:!1,token:null,errorMessage:""}}}),{signin:function(e){return function(){var t=Object(l.a)(i.a.mark((function t(n){var a,c;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.email,c=n.password,t.abrupt("return",new Promise(function(){var t=Object(l.a)(i.a.mark((function t(n,r){var o;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,console.log("signin"),t.next=4,p.post("/signin",{email:a,password:c});case 4:o=t.sent,console.log(o.data),localStorage.setItem("token",o.data.token),e({type:"signin",payload:o.data.token}),n(!0),t.next=17;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0),console.log(t.t0.response.data.error),e({type:"add_error",payload:t.t0.response.data.error}),r(!1);case 17:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,n){return t.apply(this,arguments)}}()));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},signout:function(e){return Object(l.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:localStorage.getItem("token")&&(localStorage.removeItem("token"),window.location.reload()),e({type:"signout"});case 2:case"end":return t.stop()}}),t)})))},clearErrorMessage:function(e){return function(){e({type:"clear_error_message"})}},restoreToken:function(e){return Object(l.a)(i.a.mark((function t(){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{n=localStorage.getItem("token"),Date.now()>=1e3*JSON.parse(atob(n.split(".")[1])).exp&&(localStorage.clear(),n=null),e({type:"restore_token",payload:n})}catch(a){console.log("cant to get token..."),e({type:"restore_token",payload:null})}case 1:case"end":return t.stop()}}),t)})))}},{token:null,errorMessage:"",isLoading:!0}),O=m.Provider,f=m.Context,g=n(51),x=(n(210),n(211),n(416)),v=n(414),y=n(417),k=n(10),w=n.p+"static/media/logo-1500X500.fcf81f3f.png",L=n(172),S=n.n(L),C=n(117),D=n.n(C),F=n(173),M=n.n(F),I=n(174),H=n.n(I),E=n(118),P=n.n(E),z=n(82),A=n(44),T=n(175),_=n.n(T);n(289),n(290);P.a.setAppElement("div");var B={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)"}},N=function(){var e=c.a.useState(!1),t=Object(u.a)(e,2),n=t[0],a=t[1],r=c.a.useState({email:"",phone:""}),o=Object(u.a)(r,2),s=o[0],i=o[1],l=c.a.useState({error:null,success:null}),b=Object(u.a)(l,2),h=b[0],m=b[1],O=function(){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(s.email)&&/^\+?(972|0)(\/-)?0?([5]{1}[0-9]{1}\d{7})$/.test(s.phone)};return Object(j.jsxs)("div",{children:[Object(j.jsx)(z.a,{block:!0,size:"lg",type:"submit",onClick:function(){return a(!0)},children:"Add Patient"}),Object(j.jsx)("div",{id:"modal",className:"modal",children:Object(j.jsxs)(P.a,{isOpen:n,onRequestClose:function(){return a(!1)},style:B,closeTimeoutMS:500,children:[Object(j.jsx)("h1",{children:"Link patient"}),Object(j.jsxs)(A.a,{onSubmit:function(e){e.preventDefault(),O()&&p.post("/link-patient",s).then((function(e){m({success:e.data.message}),setTimeout((function(){return window.location.reload()}),1e3)})).catch((function(e){return m({error:e.response.data.error})}))},children:[Object(j.jsxs)(A.a.Group,{size:"lg",controlId:"email",children:[Object(j.jsx)(A.a.Label,{children:"Email"}),Object(j.jsx)(A.a.Control,{autoFocus:!0,type:"email",value:s.email,onChange:function(e){return i(Object(d.a)(Object(d.a)({},s),{},{email:e.target.value}))}})]}),Object(j.jsxs)(A.a.Group,{size:"lg",controlId:"password",children:[Object(j.jsx)(A.a.Label,{children:"Phone"}),Object(j.jsx)(_.a,{country:"il",onlyCountries:["il"],placeholder:"Patient phone number",value:s.phone,onChange:function(e){return i(Object(d.a)(Object(d.a)({},s),{},{phone:e}))}})]}),h.success?Object(j.jsx)("div",{children:Object(j.jsx)("b",{style:{color:"green"},children:h.success})}):h.error?Object(j.jsx)("div",{children:Object(j.jsx)("b",{style:{color:"red"},children:h.error})}):null,Object(j.jsx)(z.a,{block:!0,size:"lg",type:"submit",disabled:!O(),children:"Link patient"})]})]})})]})},R=C.Search.SearchBar,Y=[{dataField:"_id",hidden:!0},{dataField:"firstname",text:"First name",sort:!0},{dataField:"lastname",text:"Last name",sort:!0},{dataField:"email",text:"Email"},{dataField:"phone",text:"Phone"},{dataField:"birthdate",text:"Birth date"},{dataField:"actions",text:"Actions",formatter:function(e,t,n,a){return Object(j.jsx)(g.b,{to:{pathname:"/patient/".concat(t._id)},children:"More details"})}}],G=function(e){var t=e.pages,n=e.onPageChange,a=t.filter((function(e){return"string"!==typeof e.page}));return Object(j.jsx)("div",{style:{margin:10},children:a.map((function(e){return Object(j.jsx)("button",{className:"btn btn-primary",onClick:function(){return n(e.page)},children:e.page},e.page)}))})},Z=function(){var e=c.a.useState({patients:[],isFetched:!1}),t=Object(u.a)(e,2),n=t[0],a=t[1];c.a.useEffect((function(){p.get("/patients").then((function(e){a({patients:e.data,isFetched:!0})})).catch((function(e){console.log(e)}))}),[]);var r={pageListRenderer:G};return Object(j.jsxs)("div",{children:[Object(j.jsx)(D.a,{keyField:"_id",data:n.patients,columns:Y,search:!0,children:function(e){return Object(j.jsxs)("div",{children:[Object(j.jsx)(R,Object(d.a)(Object(d.a)({},e.searchProps),{},{placeholder:"Seach patient",srText:"Search patient:"})),Object(j.jsx)(S.a,Object(d.a)(Object(d.a)({},e.baseProps),{},{striped:!0,hover:!0,condensed:!0,loading:!n.isFetched,noDataIndication:function(){return n.isFetched?"No data":"Loading..."},overlay:M()({spinner:!0,background:"rgba(192,192,192,0.3)",text:Object(j.jsx)("b",{children:"Loading..."})}),pagination:H()(r)}))]})}}),Object(j.jsx)(N,{})]})},$=n(412),J=n(413),V=n(184),W=n(418),q=n(415),U=n(176),K=(n(403),n(399),Object(k.g)((function(e){var t=c.a.useState(),n=Object(u.a)(t,2),a=n[0],r=n[1],o=c.a.useState([]),s=Object(u.a)(o,2),d=s[0],b=s[1],h=c.a.useState(null),m=Object(u.a)(h,2),O=m[0],f=m[1],g=function(){var t=Object(l.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(window.confirm("Are you sure?")){t.next=3;break}return t.abrupt("return");case 3:p.delete("/patient/".concat(e.match.params.id,"/unlink")).then((function(e){e.data;window.location.href="/patients"})).catch((function(e){return console.log(e)}));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();c.a.useEffect((function(){a||p.get("/patient/".concat(e.match.params.id)).then((function(e){var t=e.data;r(t),t.hasMedicinesComments&&b(function(e,t){for(var n=[];e.length>0;)n.push(e.splice(0,t));return n}(Object.keys(t.medicines),4)),console.log(t)})).catch((function(e){console.log(e),f(e.response.data.error)}))}),[e.match.params.id,a]),console.log(d);var x={blood:"Blood pressure",pulse:"Pulse rate",oxygen:"Oxygen situration",bodyheat:"Body heat"};return O?Object(j.jsxs)("div",{children:[Object(j.jsx)("h1",{children:"Error"}),Object(j.jsx)("b",{children:O})]}):a?Object(j.jsxs)("div",{children:[Object(j.jsxs)("div",{class:"sidebar",children:[Object(j.jsxs)(J.a,{id:"dropdown-basic-button",title:"Actions",children:[Object(j.jsx)(V.a.Item,{href:"#/notification",children:"Send notification"}),Object(j.jsx)(V.a.Item,{href:"#/add-medicine",children:"Add medicine"})]}),Object(j.jsx)("a",{href:"#contact",children:"Contact"}),Object(j.jsx)("a",{href:"#",onClick:g,children:"Un link"})]}),Object(j.jsxs)("div",{class:"content",children:[Object(j.jsxs)("h1",{children:["Patient ",a.firstname," ",a.lastname]}),(a.hasIndicesComments||a.hasFeelingsComments||a.hasMedicinesComments)&&Object(j.jsxs)(v.a,{children:[Object(j.jsx)("h2",{children:"Last month comments"}),a.indices&&a.hasIndicesComments?Object(j.jsxs)(W.a,{style:{marginBottom:10},children:[Object(j.jsx)(W.a.Header,{children:"Exceptional indices"}),Object(j.jsx)(q.a,{style:{paddingTop:10},children:Object.keys(a.indices).map((function(e){return Object(j.jsx)(U.a,{sm:!0,children:Object(j.jsxs)(W.a,{style:{height:200},children:[Object(j.jsx)(W.a.Header,{children:x[e]}),Object(j.jsx)(W.a.Body,{style:{overflow:"scroll"},children:Object(j.jsx)("ul",{children:a.indices[e].map((function(e,t){return Object(j.jsx)("li",{children:Object(j.jsx)("p",{style:{fontSize:12,color:"red"},children:e})},"item_".concat(t))}))})})]})})}))})]}):null,d.length>0?Object(j.jsxs)(W.a,{style:{marginBottom:10},children:[Object(j.jsx)(W.a.Header,{children:"Medicines problems"}),d.map((function(e){return Object(j.jsx)(q.a,{style:{paddingTop:10},children:e.map((function(e){return Object(j.jsx)(U.a,{sm:!0,children:Object(j.jsxs)(W.a,{style:{height:200},children:[Object(j.jsx)(W.a.Header,{children:e}),Object(j.jsx)(W.a.Body,{style:{overflow:"scroll"},children:Object(j.jsx)("ul",{children:a.medicines[e].map((function(e,t){return Object(j.jsx)("li",{children:Object(j.jsx)("p",{style:{fontSize:12,color:"red"},children:e})},"item_".concat(t))}))})})]})})}))})}))]}):null,a.feelings&&a.hasFeelingsComments?Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)(W.a,{style:{height:200},children:[Object(j.jsx)(W.a.Header,{children:"Feeling bad"}),Object(j.jsx)(W.a.Body,{style:{overflow:"scroll"},children:Object(j.jsx)("ul",{children:a.feelings.map((function(e,t){return Object(j.jsx)("li",{children:Object(j.jsx)("p",{style:{fontSize:12,color:"red"},children:e})},"feel_".concat(t))}))})})]})}):null]})]})]}):Object(j.jsx)("div",{className:"center",children:Object(j.jsx)($.a,{animation:"border",role:"status",children:Object(j.jsx)("span",{className:"visually-hidden",children:"Loading..."})})})}))),X=n(40),Q=(n(401),n(34)),ee=n.n(Q),te=Object(X.c)(ee.a),ne=(Object.keys(X.b).map((function(e){return X.b[e]})),function(){var e=c.a.useState({selectedDate:null,selectedView:X.b.DAY,events:[],min:null,max:null,isLoading:!0}),t=Object(u.a)(e,2),n=t[0],a=t[1];return c.a.useEffect((function(){n.isLoading&&p.get("/meetings/worktime/").then((function(e){var t=e.data;a(Object(d.a)(Object(d.a)({},n),{},{min:ee.a.utc(t.startWorkTime,"HH:mm").local().toDate(),max:ee.a.utc(t.endWorkTime,"HH:mm").local().toDate(),selectedDate:ee()()})),console.log(t)}))}),[n.isLoading]),c.a.useEffect((function(){n.isLoading&&n.selectedDate&&p.get("/meetings/month/".concat(n.selectedDate.format("Y-MM-DD"))).then((function(e){var t=e.data;a(Object(d.a)(Object(d.a)({},n),{},{events:t.map((function(e){return Object(d.a)(Object(d.a)({},e),{},{start:ee.a.utc(e.start,"Y-MM-DD HH:mm").local().toDate(),end:ee.a.utc(e.end,"Y-MM-DD HH:mm").local().toDate()})})),isLoading:!1}))}))}),[n.selectedDate]),n.isLoading?Object(j.jsx)("h1",{children:"Loading..."}):Object(j.jsx)("div",{children:Object(j.jsx)(X.a,{events:n.events,formats:{timeGutterFormat:"HH:mm",eventTimeRangeFormat:function(e){return"".concat(ee()(e.start).format("HH:mm")," \u2013 ").concat(ee()(e.end).format("HH:mm"))}},defaultView:X.b.DAY,views:[X.b.WEEK,X.b.DAY],step:7.5,min:n.min,max:n.max,scrollToTime:new Date,onNavigate:function(e,t){console.log(e,t),a(Object(d.a)(Object(d.a)({},n),{},{selectedDate:ee()(e),selectedView:t}))},showMultiDayTimes:!0,defaultDate:new Date,localizer:te})})}),ae=function(){return Object(j.jsx)("h1",{children:"Page not found"})},ce=function(){var e=c.a.useContext(f).signout,t=[{path:"/patients",component:Z,navLink:"Patients"},{path:"/patient/:id",component:K},{path:"/calender",component:ne,navLink:"Calender"}];return Object(j.jsxs)("div",{children:[Object(j.jsx)(x.a,{bg:"light",sticky:"top",fixed:"top",children:Object(j.jsxs)(v.a,{children:[Object(j.jsx)(x.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(j.jsx)(x.a.Brand,{href:"/patients",children:Object(j.jsx)("img",{src:w,width:"100",height:"30",className:"d-inline-block align-top",alt:"React Bootstrap logo"})}),Object(j.jsx)(x.a.Collapse,{children:Object(j.jsxs)(y.a,{children:[t.map((function(e,t){return e.navLink?Object(j.jsx)(y.a.Link,{href:e.path,children:e.navLink},e+t):null})),Object(j.jsx)(y.a.Link,{onClick:function(){return e()},children:"Sign out"})]})})]})}),Object(j.jsxs)(k.d,{children:[t.map((function(e,t){return Object(j.jsx)(k.b,{exact:!0,path:e.path,component:e.component},e+t)})),Object(j.jsx)(k.a,{exact:!0,from:"/",to:"patients"}),Object(j.jsx)(k.b,{component:ae})]})]})};n(402);function re(){var e=c.a.useContext(f),t=e.state,n=e.signin,a=c.a.useState({email:"",password:""}),r=Object(u.a)(a,2),o=r[0],s=r[1];return c.a.useState((function(){return function(){return window.location.href="/"}}),[]),Object(j.jsx)("div",{className:"Login",children:Object(j.jsxs)(A.a,{onSubmit:function(e){e.preventDefault(),n(o).then((function(e){e&&(window.location.href="/")})).catch((function(e){return console.log(e)}))},children:[Object(j.jsxs)(A.a.Group,{size:"lg",controlId:"email",children:[Object(j.jsx)(A.a.Label,{children:"Email"}),Object(j.jsx)(A.a.Control,{autoFocus:!0,type:"email",value:o.email,onChange:function(e){return s(Object(d.a)(Object(d.a)({},o),{},{email:e.target.value}))}})]}),Object(j.jsxs)(A.a.Group,{size:"lg",controlId:"password",children:[Object(j.jsx)(A.a.Label,{children:"Password"}),Object(j.jsx)(A.a.Control,{type:"password",value:o.password,onChange:function(e){return s(Object(d.a)(Object(d.a)({},o),{},{password:e.target.value}))}})]}),t.errorMessage?Object(j.jsx)("div",{children:Object(j.jsx)("b",{style:{color:"red"},children:t.errorMessage})}):null,Object(j.jsx)(z.a,{block:!0,size:"lg",type:"submit",disabled:!(/^(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z]).{8,16}$/.test(o.password)&&/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(o.email)),children:"Login"})]})})}var oe=function(){return Object(j.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:Object(j.jsxs)("div",{children:[Object(j.jsx)("img",{src:w,style:{width:150,height:50},alt:"CareLog"}),Object(j.jsx)("h3",{children:"Doctor Dashboard simulation"}),Object(j.jsx)(k.d,{children:Object(j.jsx)(k.b,{exact:!0,path:"/*",component:re})})]})})},se=function(){var e=c.a.useContext(f),t=e.state,n=e.restoreToken;return c.a.useEffect((function(){t.token||n()}),[]),c.a.useEffect((function(){var e=function(){localStorage.getItem("token")};return console.log("token",localStorage.getItem("token")),window.addEventListener("storage",e),function(){window.removeEventListener("storage",e)}}),[]),t.isLoading?null:Object(j.jsx)("div",{className:"App wrapper",children:t.token?Object(j.jsx)(ce,{}):Object(j.jsx)(oe,{})})};o.a.render(Object(j.jsx)(O,{children:Object(j.jsx)(g.a,{children:Object(j.jsx)(se,{})})}),document.getElementById("root"))}},[[404,1,2]]]);
//# sourceMappingURL=main.55824b20.chunk.js.map